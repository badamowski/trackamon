var app=angular.module("trackamon",["ngRoute"]);app.controller("ParentController",function(a){}),app.controller("HomeController",function(a){var b,c,d=[];a.init=function(){findCurrentLocation(loadInitialMap),$(window).on("orientationchange",function(b){a.refresh()})},a.addTrackingPoint=function(){findCurrentLocation(addTrackingPointAtPosition)},a.addDisappearedPoint=function(){findCurrentLocation(addDisappearedPointAtPosition)},a.clearTracking=function(){_.each(d,function(a){a.setMap(null)}),d=[]},a.openHelp=function(){$("#help-modal").modal()},a.refresh=function(){_.each(d,function(a){a.setMap(null)}),_.each(d,function(a){a.setMap(c)}),findCurrentLocation(centerOnCurrentLocation)},a.undo=function(){if(d.length>0){var a=d.pop();a.setMap(null)}},findCurrentLocation=function(b){navigator.geolocation?navigator.geolocation.getCurrentPosition(b):a.message="Geolocation is not supported by this browser."},centerOnCurrentLocation=function(a){var d={lat:a.coords.latitude,lng:a.coords.longitude};b.setPosition(d),c.setCenter(d)},loadInitialMap=function(d){var e={lat:d.coords.latitude,lng:d.coords.longitude};c=new google.maps.Map(document.getElementById("map"),{center:e,mapTypeId:"satellite",zoom:17,streetViewControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_BOTTOM}}),b=new google.maps.Marker({position:e,icon:{path:google.maps.SymbolPath.CIRCLE,scale:5,fillColor:"#00BFFF",fillOpacity:1,strokeColor:"#00BFFF",strokeOpacity:1,zIndex:20},draggable:!1,map:c});var f=$('<button class="btn btn-raised btn-danger btn-lg"><i class="fa fa-times-circle" aria-hidden="true"></i> Clear</button>'),g=$('<button class="btn btn-raised btn-success btn-lg"><i class="fa fa-crosshairs" aria-hidden="true"></i> Sighting</button>'),h=$('<button class="btn btn-raised btn-warning btn-lg"><i class="fa fa-ban" aria-hidden="true"></i> Disappeared</button>'),i=$('<button class="btn btn-raised btn-lg"><i class="fa fa-question-circle-o" aria-hidden="true"></i> Help</button>'),j=$('<button class="btn btn-raised btn-info btn-lg"><i class="fa fa-refresh" aria-hidden="true"></i> Refresh</button>'),k=$('<button class="btn btn-raised btn-danger btn-lg"><i class="fa fa-undo" aria-hidden="true"></i> Undo</button>');g.bind("click",a.addTrackingPoint),h.bind("click",a.addDisappearedPoint),f.bind("click",a.clearTracking),i.bind("click",a.openHelp),j.bind("click",a.refresh),k.bind("click",a.undo),c.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(g[0]),c.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(h[0]),c.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(k[0]),c.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(j[0]),c.controls[google.maps.ControlPosition.TOP_RIGHT].push(f[0]),c.controls[google.maps.ControlPosition.TOP_CENTER].push(i[0])},addTrackingPointAtPosition=function(a){var e={lat:a.coords.latitude,lng:a.coords.longitude},f=new google.maps.Circle({strokeColor:"#00FF00",strokeOpacity:.5,strokeWeight:1,fillColor:"#00FF00",fillOpacity:.3,map:c,center:e,radius:200,zIndex:5});d.push(f),c.setCenter(e),b.setPosition(e)},addDisappearedPointAtPosition=function(a){var e={lat:a.coords.latitude,lng:a.coords.longitude},f=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:1,fillColor:"#FF0000",fillOpacity:.5,map:c,center:e,radius:200,zIndex:10});d.push(f),b.setPosition(e)}}),initMap=function(){},app.config(function(a){a.when("/",{templateUrl:"pages/home.html",controller:"HomeController"}).otherwise({redirectTo:"/"})});